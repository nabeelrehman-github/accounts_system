<div class="jumbotron text-center">
    <h1 class="display-6 mt-3">Generate Supplier Invoice</h1>
</div>
<hr class="my-1">
<div class="px-3">
    <div class="container">
        <div class="row">
            <div class="col-sm m-4">
                <div class="row">
                    <div class="col">
                        <div class="text-primary fw-bold mb-2">Your Details:</div>
                        <div class="invoice-d1">
                            <div class="small text-muted fw-bolder">From</div>
                            <div class="h4 fw-bolder">Compay Name</div>
                            <div class="small text-muted fw-bolder">Address 1</div>
                            <div class="small text-muted fw-bolder">Address 2</div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="text-primary fw-bold mb-2">Supplier's Details:</div>
                        <div class="invoice-d1">
                            <div class="small text-muted fw-bolder">To</div>

                            <ng-select [(ngModel)]="selectedCustomer" placeholder="Supplier" #selectedCustomerType>
                                <ng-option *ngFor="let customer of customerType" [value]="customer.id">
                                    {{customer.customerName}} - <span class="text-muted">{{customer.phNumber}}</span>
                                </ng-option>
                            </ng-select>

                            <ng-select [(ngModel)]="selectedPayment" placeholder="Payment" #selectPaymentType>
                                <ng-option *ngFor="let type of paymentType" [value]="type.id">
                                    {{type.name}}</ng-option>
                            </ng-select>
                            <!-- <div class="h4 fw-bolder">
                                <input class="p-1" type="text" name="buyer" id="buyer" placeholder="Buyer Name">
                            </div>
                            <div class="h4 small fw-bolder">
                                <textarea class="p-1" name="buyer_address" id="buyer_address" cols="41" rows="3" placeholder="Address"></textarea>
                            </div> -->
                        </div>
                    </div>
                </div>
                <hr>
                <div class="mt-3">
                    <!-- <div class="row row-cols-auto mb-2">
                        <div class="col fw-bolder">Invoice No : </div>
                        <div class="col text-muted fw-bolder text-left">1234567</div>
                    </div> -->

                    <div class="row row-cols-auto">
                        <div class="fw-bolder">Invoice Date : </div>
                        <div class="col text-muted fw-bold text-left">{{invoiceDate | date: 'dd/MM/yyyy'}}</div>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-lg-3 col-sm-12">
                        <!-- Using ng-option and for loop
                        <ng-select [(ngModel)]="selectedCar">
                            <ng-option *ngFor="let car of cars" [value]="car.id">{{car.name}}</ng-option>
                        </ng-select> -->
                        <!--Using items input-->

                        <!-- <span>Company</span> -->
                        <ng-select [(ngModel)]="selectedCompany" placeholder="Company" (change)="onChangeCompany()">
                            <ng-option placeholder="Company" *ngFor="let company of companies" [value]="company.id">
                                {{company.companyName}}</ng-option>
                        </ng-select>

                        <!-- <span>Model</span> -->
                        <ng-select [(ngModel)]="selectedModel" placeholder="Model" #selectModel>
                            <ng-option placeholder="Model" *ngFor="let model of models" [value]="model.id">
                                {{model.productId}}</ng-option>
                        </ng-select>

                        <span>Price</span>
                        <input [(ngModel)]="price" (keypress)="allowNumberOnly($event)" class="form-control mt-3 mb-4" type="text" #selectedPrice>


                        <span>Quantity</span>
                        <input [(ngModel)]="quantity" (keypress)="allowNumberOnly($event)" class="form-control mt-3" type="text" #selectedQuantity>

                        <div class="mt-4 row justify-content-between">
                            <div class="col-sm-5 col">
                                <button class="btn btn-dark btn-add" (click)="addToList()">Add</button>
                            </div>
                            <div class="col-sm-5 col">
                                <button class="btn btn-outline-secondary btn-clear-all" (click)="clearFields()">Clear</button>
                            </div>
                        </div>
                        <div class="mt-3">
                            <button class="btn btn-info btn-generate-invoice" (click)="generateInvoice()">Confirm Purchase</button>
                        </div>
                    </div>
                    <!-- Invoice Details Table -->
                    <div class="col-lg-9 col-sm-12">
                        <div class="table-wrapper-scroll-y my-custom-scrollbar container">
                            <table class="table table-bordered text-center" id="mainItemsTable">
                                <thead>
                                    <tr>
                                        <th style="width: 40px;">#</th>
                                        <th>Company</th>
                                        <th>Model</th>
                                        <th>Qty</th>
                                        <th>Rate</th>
                                        <th>Subtotal</th>
                                        <th style="width: 70px;">Remove</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let item of itemList;let i = index">
                                        <td>{{i + 1}}</td>
                                        <td>{{item.company}}</td>
                                        <td>{{item.model}}</td>
                                        <td>{{item.quantity}}</td>
                                        <td>{{item.rate | number}}/-</td>
                                        <td>{{item.subtotal | number}}/-</td>
                                        <td class="delte-item bg-danger text-light" (click)="removeItem(i)">
                                            <b>&times;</b>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <!-- Invoice Summary -->
                <div class="row mt-5">
                    <div class="col-9"></div>
                    <div class="col">
                        <div class="text-center">
                            <div class="summary-header p-2 px-4">
                                <span class="mb-3"><b>Invoice Summary</b></span>
                            </div>
                            <div class="row m-0">
                                <table>
                                    <tbody class="table table-bordered text-center summary-table">
                                        <tr>
                                            <td><span>Subtotal</span></td>
                                            <td><span>Rs {{subtotal | number}}/-</span></td>
                                        </tr>
                                        <tr>
                                            <td><span>Tax</span></td>
                                            <td><span>Rs {{tax | number}}/-</span></td>
                                        </tr>
                                        <tr>
                                            <td><span>Total</span></td>
                                            <td><span>Rs {{total | number}}/-</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>